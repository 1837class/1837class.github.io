<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>新用户注册页面</title>
    <link type="text/css" rel="stylesheet" href="css/register.css" />
</head>

<body>
<div id="header"><img src="images/register_logo.gif" alt="logo"/></div>
<div id="main">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td class="bg bg_top_left"></td>
            <td class="bg_top"></td>
            <td class="bg bg_top_right"></td>
        </tr>
        <tr>
            <td class="bg_left"></td>
            <td class="content">
                <form id="registerForm" action="" method="get" name="myform">
                    <dl>
                        <dt>通行证用户名：</dt>
                        <dd><input type="text" id="userName" class="inputs userWidth"/> @163.com</dd>
                        <div id="userNameId"></div>
                    </dl>
                    <dl>
                        <dt>登录密码：</dt>
                        <dd><input type="password" id="pwd" class="inputs"/></dd>
                        <div id="pwdId"></div>
                    </dl>
                    <dl>
                        <dt>重复登录密码：</dt>
                        <dd><input type="password" id="repwd" class="inputs"/></dd>
                        <div id="repwdId"></div>
                    </dl>
                    <dl>
                        <dt>性别：</dt>
                        <dd><input name="sex" type="radio" value="" checked="checked"/>男 <input name="sex" type="radio" value="" />女 </dd>
                    </dl>
                    <dl>
                        <dt>真实姓名：</dt>
                        <dd><input type="text" id="realName" class="inputs" /></dd>
                    </dl>
                    <dl>
                        <dt>昵称：</dt>
                        <dd><input type="text" id="nickName" class="inputs"/></dd>
                        <div id="nickNameId"></div>
                    </dl>
                    <dl>
                        <dt>关联手机号：</dt>
                        <dd><input type="text" id="tel" class="inputs"/></dd>
                        <div id="telId"></div>
                    </dl>
                    <dl>
                        <dt>保密邮箱：</dt>
                        <dd><input type="text" id="email" class="inputs"/></dd>
                        <div id="emailId"></div>
                    </dl>
                    <dl>
                        <dt></dt>
                        <dd><input name=" " type="image" src="images/button.gif"/></dd>
                    </dl>
                </form>
            </td>
            <td class="bg_right"></td>
        </tr>
        <tr>
            <td class="bg bg_end_left"></td>
            <td class="bg_end"></td>
            <td class="bg bg_end_right"></td>
        </tr>
    </table>
</div>
</body>
<script type="text/javascript">
	var inputs = document.getElementsByClassName('inputs')
	var btn =  document.getElementsByTagName("input")[9]

	//点击注册按钮事件
	btn.onclick = function(event){
		for (var j in inputs) {
			if(inputs[j].value == ''){
				if(inputs[j].getAttribute('id') == 'userName'){
					event.preventDefault()
					userNameId.innerText = "通行证用户名不能为空，请输入通行证用户名"
				}
				if(inputs[j].getAttribute('id') == 'pwd'){
					event.preventDefault()
					pwdId.innerText = "密码不能为空，请输入密码"
				}
				if(inputs[j].getAttribute('id') == 'repwd'){
					event.preventDefault()
					repwdId.innerText = "重复密码不能为空，请输入重复密码"
				}
				if(inputs[j].getAttribute('id') == 'nickName'){
					event.preventDefault()
					nickNameId.innerText = "昵称不能为空，请输入昵称"
				}
				if(inputs[j].getAttribute('id') == 'tel'){
					event.preventDefault()
					telId.innerText = "关联手机号不能为空，请输入手机号码"
				}
				if(inputs[j].getAttribute('id') == 'email'){
					event.preventDefault()
					emailId.innerText = "保密邮箱不能为空，请输入保密邮箱"
				}
			}
		}
		//逐一判断是否格式合法
		if(checkName()){
			if(checkPwd()){
				if(checkRePwd()){
					if(checkNickName()){
						if(checkTel()){
							checkEmail()
						}
					}
				}
			}
		}
}
	//以下是控件获得焦点
	for (var i in inputs) {
		inputs[i].onfocus = function(event){
				if(event.target.id == 'userName'){
				userNameId.innerText = "1.由字母、数字、下划线、点、减号组成" + "\n" + 
				"2.只能以数字、字母开头或结尾，且长度为4-18"
				}
				if(event.target.id == 'pwd'){
				pwdId.innerHTML = "密码长度为6-16"
				}
				if(event.target.id == 'repwd'){
				repwdId.innerHTML = "请重新输入密码"
				}
				if(event.target.id == 'nickName'){
				nickNameId.innerHTML = "长度为4-16个字符"
				}
				if(event.target.id == 'tel'){
				telId.innerText = "1.手机号码以13,15,18开头" + "\n" + "2.手机号码由十一位数字组成"
				}
				if(event.target.id == 'email'){
				emailId.innerHTML = "请输入您常用的电子邮箱"
				}
		}
	
		//以下是控件失去焦点
		inputs[i].onblur = function(event){
				if(event.target.id == 'userName'){
					userNameId.innerText = ''
				}
				if(event.target.id == 'pwd'){
					pwdId.innerHTML = ""
				}
				if(event.target.id == 'repwd'){
				repwdId.innerHTML = ""
				}
				if(event.target.id == 'nickName'){
				nickNameId.innerHTML = ""
				}
				if(event.target.id == 'tel'){
				telId.innerText = ""
				}
				if(event.target.id == 'email'){
				emailId.innerHTML = ""
				}
		}
	}
	//以下是验证输入的信息是否合法的函数
		function checkName(){
			var Name = inputs[0].value
			var nameReg = /^[0-9a-zA-Z][\w\.\-]{3,17}[0-9a-zA-Z]$/
			if(!nameReg.test(Name)) { 
				event.preventDefault() 
				userNameId.innerText = "1.由字母、数字、下划线、点、减号组成" + "\n" + 
				"2.只能以数字、字母开头或结尾，且长度为4-18"
				inputs[0].value = ''
				return 0
			}
			return 1
		}
		function checkPwd(){
			var usePassword = inputs[1].value
			var passwdReg = /^[\S]{6,16}$/ 
			if(!passwdReg.test(usePassword)) { 
				event.preventDefault() 
				pwdId.innerHTML = "错误！密码长度应为6-16"
				inputs[1].value = ''
				return 0
			}
			return 1
		}
		function checkRePwd(){
			var useRePassword = inputs[2].value
			if(inputs[1].value !== useRePassword){
				event.preventDefault() 
				repwdId.innerHTML = "两次输入的密码不一致，请重新输入"
				return 0
			}
			return 1
		}
		function checkNickName(){
			var nickName = inputs[6].value
			var nickNameReg = /^[\w!@#$%&*]{4,20}$/
			if(!nickNameReg.test(nickName)) { 
				event.preventDefault() 
				nickNameId.innerHTML = '错误！昵称为4-20个字符'
				inputs[6].value = ''
				return 0
			}
			return 1
		}
		function checkTel(){
			var tel = inputs[7].value
			var telReg = /^1[358][\d]{9}$/
			if(!telReg.test(tel)) { 
				event.preventDefault() 
				nickNameId.innerHTML = '关联手机号码输入不正确，请重新输入'
				inputs[7].value = ''
				return 0
			}
			return 1
		}
		function checkEmail(){
			var email = inputs[8].value
			var emailReg = /^([\w\.\-]+)@[a-z0-9]{2,3}[\.](com|cn)$/
			if(!emailReg.test(email)) { 
				event.preventDefault() 
				emailId.innerHTML = "保密邮箱格式不正确，请重新输入"
				inputs[8].value = ''
				return 0
			}
			return 1
		}
			
	
</script>
</html>
